2025-12-23 02:52:04.523 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 02:52:04.838 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 02:52:04.839 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 02:52:04.842 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 02:52:04.844 +02:00 [INF] Hosting environment: Development
2025-12-23 02:52:04.844 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 02:52:05.249 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 02:52:05.305 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 57.6698ms
2025-12-23 02:52:05.348 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 02:52:05.437 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 88.4975ms
2025-12-23 02:52:05.548 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/favicon-32x32.png - null null
2025-12-23 02:52:05.558 +02:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-12-23 02:52:05.559 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/favicon-32x32.png - 200 628 image/png 10.3345ms
2025-12-23 02:52:05.674 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 02:52:05.770 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 95.7309ms
2025-12-23 03:51:05.791 +02:00 [INF] Application is shutting down...
2025-12-23 10:54:50.468 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 10:54:50.721 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 10:54:50.723 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 10:54:50.725 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 10:54:50.725 +02:00 [INF] Hosting environment: Development
2025-12-23 10:54:50.726 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 10:54:51.446 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 10:54:51.493 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 48.3305ms
2025-12-23 10:54:51.507 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 10:54:51.582 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 75.0238ms
2025-12-23 10:54:51.676 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/favicon-32x32.png - null null
2025-12-23 10:54:51.686 +02:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-12-23 10:54:51.688 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/favicon-32x32.png - 200 628 image/png 12.043ms
2025-12-23 10:54:51.742 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 10:54:51.839 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 96.8416ms
2025-12-23 10:58:08.176 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/admin/system-state - null null
2025-12-23 10:58:08.211 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator)
2025-12-23 10:58:08.214 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-12-23 10:58:08.215 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/admin/system-state - 401 0 null 38.9781ms
2025-12-23 10:58:18.374 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 10:58:18.380 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 10:58:18.399 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 10:58:19.316 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 10:58:19.339 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:223a47a6-905f-43d1-b282-c255abeedb90
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:223a47a6-905f-43d1-b282-c255abeedb90
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 10:58:19.348 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 946.4216ms
2025-12-23 10:58:19.350 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 10:58:19.352 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:223a47a6-905f-43d1-b282-c255abeedb90
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-23 10:58:19.401 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 500 null text/plain; charset=utf-8 1026.2821ms
2025-12-23 11:00:11.816 +02:00 [INF] Application is shutting down...
2025-12-23 11:00:17.781 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 11:00:17.906 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 11:00:17.907 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 11:00:17.909 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 11:00:17.910 +02:00 [INF] Hosting environment: Development
2025-12-23 11:00:17.911 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 11:00:18.301 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 11:00:18.336 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 36.5882ms
2025-12-23 11:00:18.347 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 11:00:18.420 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 73.1251ms
2025-12-23 11:00:18.580 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 11:00:18.656 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 75.2746ms
2025-12-23 11:00:22.351 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:00:22.374 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:00:22.391 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:00:23.169 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:00:23.184 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:98a51355-334a-4f77-ae27-fd94f4cb8dc2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:98a51355-334a-4f77-ae27-fd94f4cb8dc2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:00:23.193 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 799.1074ms
2025-12-23 11:00:23.194 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:00:23.197 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:98a51355-334a-4f77-ae27-fd94f4cb8dc2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-23 11:00:23.218 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 500 null text/plain; charset=utf-8 867.3085ms
2025-12-23 11:00:25.317 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:00:25.322 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:00:25.323 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:00:25.362 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:00:25.364 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:98a51355-334a-4f77-ae27-fd94f4cb8dc2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:98a51355-334a-4f77-ae27-fd94f4cb8dc2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:00:25.369 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 45.2576ms
2025-12-23 11:00:25.370 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:00:25.371 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.TryGetConnection(DbConnection owningConnection, TaskCompletionSource`1 retry, DbConnectionOptions userOptions, DbConnectionInternal oldConnection, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionInternal.TryOpenConnectionInternal(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionClosed.TryOpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory, TaskCompletionSource`1 retry, DbConnectionOptions userOptions)
   at Microsoft.Data.SqlClient.SqlConnection.TryOpen(TaskCompletionSource`1 retry, SqlConnectionOverrides overrides)
   at Microsoft.Data.SqlClient.SqlConnection.InternalOpenAsync(CancellationToken cancellationToken)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:98a51355-334a-4f77-ae27-fd94f4cb8dc2
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-23 11:00:25.379 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 500 null text/plain; charset=utf-8 62.159ms
2025-12-23 11:01:10.347 +02:00 [INF] Application is shutting down...
2025-12-23 11:01:13.546 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 11:01:13.647 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 11:01:13.648 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 11:01:13.650 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 11:01:13.650 +02:00 [INF] Hosting environment: Development
2025-12-23 11:01:13.651 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 11:01:14.111 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 11:01:14.161 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 50.3059ms
2025-12-23 11:01:14.170 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 11:01:14.262 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 91.4431ms
2025-12-23 11:01:14.407 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 11:01:14.502 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 94.8083ms
2025-12-23 11:01:16.710 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:01:16.736 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:01:16.751 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:01:17.587 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:01:17.601 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:a326c009-139e-42c2-a125-a718376379c4
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:a326c009-139e-42c2-a125-a718376379c4
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:01:17.611 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 856.3143ms
2025-12-23 11:01:17.612 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:01:17.615 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:a326c009-139e-42c2-a125-a718376379c4
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-23 11:01:17.636 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 500 null text/plain; charset=utf-8 925.9833ms
2025-12-23 11:03:45.003 +02:00 [INF] Application is shutting down...
2025-12-23 11:03:48.127 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 11:03:48.255 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 11:03:48.256 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 11:03:48.258 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 11:03:48.259 +02:00 [INF] Hosting environment: Development
2025-12-23 11:03:48.260 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 11:03:48.705 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 11:03:48.755 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 51.4681ms
2025-12-23 11:03:48.763 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 11:03:48.845 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 81.5373ms
2025-12-23 11:03:48.986 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 11:03:49.060 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 74.2651ms
2025-12-23 11:03:51.347 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:03:51.371 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:03:51.387 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:03:52.185 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:03:52.199 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:61efc51b-d8a3-4787-b738-b5b4e8701408
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:61efc51b-d8a3-4787-b738-b5b4e8701408
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:03:52.210 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 819.3673ms
2025-12-23 11:03:52.212 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:03:52.215 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:61efc51b-d8a3-4787-b738-b5b4e8701408
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-23 11:03:52.238 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 500 null text/plain; charset=utf-8 891.471ms
2025-12-23 11:03:54.565 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 11:03:54.568 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 3.3947ms
2025-12-23 11:03:54.713 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 11:03:54.724 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 11.0891ms
2025-12-23 11:04:01.580 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:04:01.585 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:04:01.585 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:04:01.627 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:04:01.630 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:d984a153-13a6-42de-91b9-ec16c1d6c870
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:d984a153-13a6-42de-91b9-ec16c1d6c870
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:04:01.636 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 49.7191ms
2025-12-23 11:04:01.637 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:04:01.638 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:d984a153-13a6-42de-91b9-ec16c1d6c870
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-23 11:04:01.647 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 500 null text/plain; charset=utf-8 66.3215ms
2025-12-23 11:09:40.203 +02:00 [INF] Application is shutting down...
2025-12-23 11:09:43.121 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 11:09:43.246 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 11:09:43.249 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 11:09:43.251 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 11:09:43.252 +02:00 [INF] Hosting environment: Development
2025-12-23 11:09:43.253 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 11:09:43.724 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 11:09:43.764 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 41.725ms
2025-12-23 11:09:43.773 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 11:09:43.864 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 91.2694ms
2025-12-23 11:09:43.895 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/swagger-ui.css - null null
2025-12-23 11:09:43.908 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-23 11:09:43.909 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/swagger-ui.css - 499 144929 text/css 14.0338ms
2025-12-23 11:09:44.006 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 11:09:44.078 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.457ms
2025-12-23 11:09:51.756 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:09:51.780 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:09:51.796 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:09:52.609 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:09:52.623 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:7a3b8e80-4810-42b3-bfa8-f3be654f8a46
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:7a3b8e80-4810-42b3-bfa8-f3be654f8a46
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:09:52.633 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 832.651ms
2025-12-23 11:09:52.634 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:09:52.636 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:7a3b8e80-4810-42b3-bfa8-f3be654f8a46
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-23 11:09:52.657 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 500 null text/plain; charset=utf-8 901.1424ms
2025-12-23 11:26:55.599 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:26:55.603 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:26:55.604 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:26:55.644 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:26:55.646 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:ca0294b0-f01c-4a91-82d6-fe1eaa8daa2b
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:ca0294b0-f01c-4a91-82d6-fe1eaa8daa2b
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:26:55.653 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 47.9ms
2025-12-23 11:26:55.653 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:26:55.654 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:ca0294b0-f01c-4a91-82d6-fe1eaa8daa2b
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-12-23 11:26:55.663 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 500 null text/plain; charset=utf-8 64.4041ms
2025-12-23 11:30:26.197 +02:00 [INF] Application is shutting down...
2025-12-23 11:30:31.173 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 11:30:31.284 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 11:30:31.286 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 11:30:31.288 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 11:30:31.288 +02:00 [INF] Hosting environment: Development
2025-12-23 11:30:31.289 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 11:30:31.771 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 11:30:31.812 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 42.3567ms
2025-12-23 11:30:31.823 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 11:30:31.902 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 78.412ms
2025-12-23 11:30:32.026 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 11:30:32.107 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 81.2788ms
2025-12-23 11:30:34.417 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:30:34.439 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:30:34.455 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:30:35.224 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:30:35.238 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:ed05b9b3-f3ac-4c17-ba09-939c9bdb17ed
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:ed05b9b3-f3ac-4c17-ba09-939c9bdb17ed
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:30:35.247 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 788.5093ms
2025-12-23 11:30:35.248 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:30:35.249 +02:00 [ERR] Unhandled exception
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:ed05b9b3-f3ac-4c17-ba09-939c9bdb17ed
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.GenericRepository`1.GetAllAsync() in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\GenericRepository.cs:line 19
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 72
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at CareLink.Api.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 25
2025-12-23 11:30:35.270 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 400 null application/json 852.877ms
2025-12-23 11:43:42.993 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 57
2025-12-23 11:43:42.997 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 11:43:43.001 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:43:43.137 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 11:43:43.139 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:a3a69788-a1b5-4818-9cfa-dc63434781fc
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:a3a69788-a1b5-4818-9cfa-dc63434781fc
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 11:43:43.145 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 143.7376ms
2025-12-23 11:43:43.146 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 11:43:43.147 +02:00 [ERR] Unhandled exception
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean ignoreSniOpenTimeout, TimeoutTimer timeout, Boolean withFailover)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)
   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool)
   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)
   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:a3a69788-a1b5-4818-9cfa-dc63434781fc
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.UserRepository.GetByEmailAsync(String email) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\UserRepository.cs:line 17
   at CareLink.Security.Security.AuthService.Login(UserLoginDto userLoginDto) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 47
   at CareLink.Api.Controllers.AuthController.Login(LoginRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 38
   at lambda_method129(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at CareLink.Api.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 25
2025-12-23 11:43:43.155 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 400 null application/json 162.4286ms
2025-12-23 11:44:23.459 +02:00 [INF] Application is shutting down...
2025-12-23 11:45:40.119 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 11:45:40.213 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 11:45:40.214 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 11:45:40.216 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 11:45:40.217 +02:00 [INF] Hosting environment: Development
2025-12-23 11:45:40.217 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 11:45:40.696 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 11:45:40.735 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 40.2601ms
2025-12-23 11:45:40.745 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 11:45:40.830 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 84.9966ms
2025-12-23 11:45:40.869 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/swagger-ui.css - null null
2025-12-23 11:45:40.882 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-23 11:45:40.883 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/swagger-ui.css - 499 144929 text/css 14.4045ms
2025-12-23 11:45:40.984 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 11:45:41.057 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 72.2135ms
2025-12-23 11:45:49.340 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 57
2025-12-23 11:45:49.364 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 11:45:49.381 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:45:50.287 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 11:45:50.306 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 920.9482ms
2025-12-23 11:45:50.307 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 11:45:50.309 +02:00 [ERR] Unhandled exception
System.UnauthorizedAccessException: Invalid credentials.
   at CareLink.Security.Security.AuthService.Login(UserLoginDto userLoginDto) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 51
   at CareLink.Api.Controllers.AuthController.Login(LoginRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 38
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at CareLink.Api.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 25
2025-12-23 11:45:50.326 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 401 null application/json 986.0387ms
2025-12-23 11:45:59.132 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:45:59.137 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:45:59.141 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:45:59.170 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 11:45:59.181 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 11:45:59.183 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 41.216ms
2025-12-23 11:45:59.184 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:45:59.185 +02:00 [ERR] Unhandled exception
System.ArgumentException: Role does not exist
   at CareLink.Persistence.Repositories.RoleRepository.IsRoleValid(Int64 roleId) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\RoleRepository.cs:line 30
   at CareLink.Security.Security.AuthService.Register(UserRegisterDto userData) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 80
   at CareLink.Api.Controllers.AuthController.Register(RegisterRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 56
   at lambda_method130(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at CareLink.Api.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 25
2025-12-23 11:45:59.189 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 400 null application/json 56.5193ms
2025-12-23 11:46:05.952 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 204
2025-12-23 11:46:05.954 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:46:05.956 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:46:05.997 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 11:46:06.003 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 11:46:06.125 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 11:46:06.143 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 11:46:06.148 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 191.231ms
2025-12-23 11:46:06.148 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:46:06.149 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 197.709ms
2025-12-23 11:46:11.616 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 57
2025-12-23 11:46:11.618 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 11:46:11.618 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:46:11.626 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 11:46:11.646 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 11:46:11.649 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 30.3608ms
2025-12-23 11:46:11.650 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 11:46:11.651 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 35.4028ms
2025-12-23 11:47:02.717 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/roles - null null
2025-12-23 11:47:02.719 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RoleController.GetAllRoles (CareLink.Api)'
2025-12-23 11:47:02.722 +02:00 [INF] Route matched with {action = "GetAllRoles", controller = "Role"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRoles() on controller CareLink.Api.Controllers.RoleController (CareLink.Api).
2025-12-23 11:47:02.729 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name]
FROM [Roles] AS [r]
2025-12-23 11:47:02.731 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[CareLink.Domain.Entities.SubEntities.Role, CareLink.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 11:47:02.733 +02:00 [INF] Executed action CareLink.Api.Controllers.RoleController.GetAllRoles (CareLink.Api) in 9.9548ms
2025-12-23 11:47:02.734 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RoleController.GetAllRoles (CareLink.Api)'
2025-12-23 11:47:02.734 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/roles - 200 null application/json; charset=utf-8 17.1302ms
2025-12-23 11:47:16.897 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 205
2025-12-23 11:47:16.899 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:47:16.899 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:47:16.902 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 11:47:16.906 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 11:47:16.914 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 11:47:16.916 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 11:47:16.917 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 16.9063ms
2025-12-23 11:47:16.918 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:47:16.918 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 21.1644ms
2025-12-23 11:47:33.385 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 205
2025-12-23 11:47:33.387 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:47:33.387 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:47:33.390 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 11:47:33.392 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 11:47:33.430 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 11:47:33.431 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 11:47:33.432 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 43.7317ms
2025-12-23 11:47:33.433 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 11:47:33.433 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 48.4809ms
2025-12-23 11:47:44.446 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 58
2025-12-23 11:47:44.447 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 11:47:44.448 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 11:47:44.453 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 11:47:44.457 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 11:47:44.458 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 8.9433ms
2025-12-23 11:47:44.459 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 11:47:44.460 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 13.8663ms
2025-12-23 12:11:28.292 +02:00 [INF] Application is shutting down...
2025-12-23 12:11:33.985 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 12:11:34.103 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 12:11:34.104 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 12:11:34.106 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 12:11:34.107 +02:00 [INF] Hosting environment: Development
2025-12-23 12:11:34.107 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 12:11:34.588 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 12:11:34.622 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 34.0558ms
2025-12-23 12:11:34.629 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 12:11:34.704 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 75.0453ms
2025-12-23 12:11:34.851 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 12:11:34.941 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 89.0632ms
2025-12-23 12:11:43.738 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/difficultys - null null
2025-12-23 12:11:43.795 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.DifficultyController.GetDifficultiesAsync (CareLink.Api)'
2025-12-23 12:11:43.807 +02:00 [INF] Route matched with {action = "GetDifficulties", controller = "Difficulty"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDifficultiesAsync() on controller CareLink.Api.Controllers.DifficultyController (CareLink.Api).
2025-12-23 12:11:44.600 +02:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [d].[Id], [d].[Name]
FROM [Difficulties] AS [d]
2025-12-23 12:11:44.643 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IReadOnlyCollection`1[[CareLink.Domain.Entities.SubEntities.Difficulty, CareLink.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 12:11:44.656 +02:00 [INF] Executed action CareLink.Api.Controllers.DifficultyController.GetDifficultiesAsync (CareLink.Api) in 845.8255ms
2025-12-23 12:11:44.657 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.DifficultyController.GetDifficultiesAsync (CareLink.Api)'
2025-12-23 12:11:44.664 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/difficultys - 200 null application/json; charset=utf-8 925.8452ms
2025-12-23 12:56:39.792 +02:00 [INF] Application is shutting down...
2025-12-23 12:57:40.744 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 12:57:40.844 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 12:57:40.846 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 12:57:40.849 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 12:57:40.850 +02:00 [INF] Hosting environment: Development
2025-12-23 12:57:40.850 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 12:57:41.206 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 12:57:41.253 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 49.4069ms
2025-12-23 12:57:41.267 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 12:57:41.360 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 92.842ms
2025-12-23 12:57:41.544 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 12:57:41.640 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 96.1977ms
2025-12-23 14:00:09.526 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 235
2025-12-23 14:00:09.576 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '23.12.2025 10:47:44', Current time (UTC): '23.12.2025 12:00:09'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-12-23 14:00:09.585 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '23.12.2025 10:47:44', Current time (UTC): '23.12.2025 12:00:09'.
2025-12-23 14:00:09.588 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 14:00:09.603 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 14:00:10.411 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 14:00:10.526 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 14:00:10.616 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 14:00:10.635 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 14:00:10.643 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 1036.1053ms
2025-12-23 14:00:10.644 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 14:00:10.649 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 1123.0089ms
2025-12-23 14:00:29.569 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 64
2025-12-23 14:00:29.574 +02:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '23.12.2025 10:47:44', Current time (UTC): '23.12.2025 12:00:29'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-12-23 14:00:29.575 +02:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '23.12.2025 10:47:44', Current time (UTC): '23.12.2025 12:00:29'.
2025-12-23 14:00:29.576 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 14:00:29.579 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 14:00:29.657 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 14:00:29.668 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 14:00:29.671 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 90.9705ms
2025-12-23 14:00:29.672 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 14:00:29.673 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 103.9804ms
2025-12-23 14:00:52.674 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7173/api/admin/users/1/role/2 - null 0
2025-12-23 14:00:52.685 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.ChangeUserRole (CareLink.Api)'
2025-12-23 14:00:52.688 +02:00 [INF] Route matched with {action = "ChangeUserRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeUserRole(Int64, Int64) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 14:00:52.724 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 14:00:52.729 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2025-12-23 14:00:52.740 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p9='?' (DbType = Int64), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [DateCreated] = @p1, [DateOdBirth] = @p2, [Email] = @p3, [FirstName] = @p4, [LastName] = @p5, [PasswordHash] = @p6, [PhoneNumber] = @p7, [RoleId] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-12-23 14:00:52.745 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-23 14:00:52.745 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.ChangeUserRole (CareLink.Api) in 55.9124ms
2025-12-23 14:00:52.746 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.ChangeUserRole (CareLink.Api)'
2025-12-23 14:00:52.746 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7173/api/admin/users/1/role/2 - 204 null null 72.1098ms
2025-12-23 14:03:23.839 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7173/api/admin/users/1 - null null
2025-12-23 14:03:23.843 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.DeleteUser (CareLink.Api)'
2025-12-23 14:03:23.846 +02:00 [INF] Route matched with {action = "DeleteUser", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteUser(Int64) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 14:03:23.855 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 14:03:23.899 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-23 14:03:23.915 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[DateCreated], [t].[DateOdBirth], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[RoleId], [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m0].[Id], [m0].[Content], [m0].[ReceiverId], [m0].[SenderId], [m0].[SentAt], [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId], [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId], [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[AddedAt], [r0].[GuardianUserId], [r0].[RelationTypeId], [r0].[RelativeUserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Messages] AS [m] ON [t].[Id] = [m].[SenderId]
LEFT JOIN [Messages] AS [m0] ON [t].[Id] = [m0].[ReceiverId]
LEFT JOIN [IotDevices] AS [i] ON [t].[Id] = [i].[UserId]
LEFT JOIN [Notifications] AS [n] ON [t].[Id] = [n].[UserId]
LEFT JOIN [Relatives] AS [r] ON [t].[Id] = [r].[RelativeUserId]
LEFT JOIN [Relatives] AS [r0] ON [t].[Id] = [r0].[GuardianUserId]
ORDER BY [t].[Id], [m].[Id], [m0].[Id], [i].[Id], [n].[Id], [r].[Id]
2025-12-23 14:03:23.928 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ExpiresAt], [s].[StartedAt], [s].[StripeSubscriptionId], [s].[SubscriptionStatusId], [s].[SubscriptionTypeId], [s].[UserId]
FROM [Subscriptions] AS [s]
WHERE [s].[UserId] = @__userId_0
2025-12-23 14:03:23.944 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p0;
2025-12-23 14:03:23.947 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-23 14:03:23.947 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.DeleteUser (CareLink.Api) in 100.6741ms
2025-12-23 14:03:23.948 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.DeleteUser (CareLink.Api)'
2025-12-23 14:03:23.949 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7173/api/admin/users/1 - 204 null null 109.4673ms
2025-12-23 14:03:38.780 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/admin/system-state - null null
2025-12-23 14:03:38.783 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.GetSystemState (CareLink.Api)'
2025-12-23 14:03:38.786 +02:00 [INF] Route matched with {action = "GetSystemState", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSystemState() on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 14:03:38.794 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 14:03:38.800 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId]
FROM [IotDevices] AS [i]
2025-12-23 14:03:38.805 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ExpiresAt], [s].[StartedAt], [s].[StripeSubscriptionId], [s].[SubscriptionStatusId], [s].[SubscriptionTypeId], [s].[UserId]
FROM [Subscriptions] AS [s]
2025-12-23 14:03:38.810 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 14:03:38.812 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Application.Dtos.Admin.SystemStateDto'.
2025-12-23 14:03:38.813 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.GetSystemState (CareLink.Api) in 26.4049ms
2025-12-23 14:03:38.814 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.GetSystemState (CareLink.Api)'
2025-12-23 14:03:38.815 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/admin/system-state - 200 null application/json; charset=utf-8 35.2094ms
2025-12-23 14:04:35.294 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - null null
2025-12-23 14:04:35.296 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 14:04:35.299 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogs(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 14:04:35.308 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Admin.SystemLogDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 14:04:35.310 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api) in 10.0928ms
2025-12-23 14:04:35.311 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 14:04:35.312 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - 200 null application/json; charset=utf-8 17.8301ms
2025-12-23 14:08:31.345 +02:00 [INF] Application is shutting down...
2025-12-23 14:08:32.483 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 14:08:32.584 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 14:08:32.585 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 14:08:32.587 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 14:08:32.588 +02:00 [INF] Hosting environment: Development
2025-12-23 14:08:32.588 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 14:08:33.056 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 14:08:33.091 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 36.2109ms
2025-12-23 14:08:33.099 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 14:08:33.177 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 77.4432ms
2025-12-23 14:08:33.331 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 14:08:33.414 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 82.6845ms
2025-12-23 14:08:37.639 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - null null
2025-12-23 14:08:37.695 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 14:08:37.711 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogs(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 14:08:37.799 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Admin.SystemLogDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 14:08:37.811 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api) in 96.9419ms
2025-12-23 14:08:37.812 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 14:08:37.814 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - 200 null application/json; charset=utf-8 174.0986ms
2025-12-23 14:12:40.432 +02:00 [INF] Application is shutting down...
2025-12-23 14:12:46.585 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 14:12:46.715 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 14:12:46.716 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 14:12:46.718 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 14:12:46.718 +02:00 [INF] Hosting environment: Development
2025-12-23 14:12:46.719 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 14:12:47.200 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 14:12:47.248 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 49.008ms
2025-12-23 14:12:47.259 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 14:12:47.347 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 87.8463ms
2025-12-23 14:12:47.488 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 14:12:47.579 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 90.406ms
2025-12-23 14:12:51.779 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - null null
2025-12-23 14:12:51.840 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 14:12:51.855 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogs(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 14:12:51.993 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api) in 133.2455ms
2025-12-23 14:12:51.994 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 14:12:51.996 +02:00 [ERR] Unhandled exception
System.IO.IOException: The process cannot access the file 'C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\logs\log-20251223.txt' because it is being used by another process.
   at Microsoft.Win32.SafeHandles.SafeFileHandle.CreateFile(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options)
   at Microsoft.Win32.SafeHandles.SafeFileHandle.Open(String fullPath, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.OSFileStreamStrategy..ctor(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.Strategies.FileStreamHelpers.ChooseStrategyCore(String path, FileMode mode, FileAccess access, FileShare share, FileOptions options, Int64 preallocationSize, Nullable`1 unixCreateMode)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, Int64 preallocationSize)
   at System.IO.File.AsyncStreamReader(String path, Encoding encoding)
   at System.IO.File.InternalReadAllLinesAsync(String path, Encoding encoding, CancellationToken cancellationToken)
   at CareLink.Application.Implementations.FileLogReaderService.ReadLogsAsync(Nullable`1 from, Nullable`1 to, String level) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Application\Implementations\FileLogReaderService.cs:line 28
   at CareLink.Application.Implementations.AdminService.GetLogsAsync(Nullable`1 from, Nullable`1 to, String level) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Application\Implementations\AdminService.cs:line 79
   at CareLink.Api.Controllers.AdminController.GetLogs(Nullable`1 from, Nullable`1 to, String level) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AdminController.cs:line 46
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at CareLink.Api.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 25
2025-12-23 14:12:52.017 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - 500 null application/json 237.9653ms
2025-12-23 14:14:59.809 +02:00 [INF] Application is shutting down...
2025-12-23 14:15:03.949 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 14:15:04.070 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 14:15:04.071 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 14:15:04.073 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 14:15:04.074 +02:00 [INF] Hosting environment: Development
2025-12-23 14:15:04.075 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 14:15:04.568 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 14:15:04.618 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 50.4466ms
2025-12-23 14:15:04.631 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 14:15:04.723 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 92.2337ms
2025-12-23 14:15:04.892 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 14:15:04.977 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.7334ms
2025-12-23 14:15:07.371 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - null null
2025-12-23 14:15:07.429 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 14:15:07.447 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogs(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 14:15:07.570 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Admin.SystemLogDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 14:15:07.587 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api) in 136.8642ms
2025-12-23 14:15:07.588 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 14:15:07.591 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - 200 null application/json; charset=utf-8 220.6301ms
2025-12-23 14:56:52.445 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 238
2025-12-23 14:56:52.449 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 14:56:52.453 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 14:56:53.214 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 14:56:53.329 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 14:56:53.423 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 14:56:53.440 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 14:56:53.442 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 987.6293ms
2025-12-23 14:56:53.443 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 14:56:53.448 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 1002.4997ms
2025-12-23 14:57:05.577 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 240
2025-12-23 14:57:05.582 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 14:57:05.582 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 14:57:05.621 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 14:57:05.626 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 14:57:05.632 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 14:57:05.634 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 14:57:05.635 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 51.2464ms
2025-12-23 14:57:05.635 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 14:57:05.636 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 59.0721ms
2025-12-23 14:57:12.220 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 237
2025-12-23 14:57:12.222 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 14:57:12.223 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 14:57:12.236 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 14:57:12.238 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 14:57:12.245 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 14:57:12.246 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 14:57:12.247 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 23.2478ms
2025-12-23 14:57:12.247 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 14:57:12.248 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 28.0699ms
2025-12-23 14:57:35.546 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 70
2025-12-23 14:57:35.549 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 14:57:35.552 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 14:57:35.597 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 14:57:35.606 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 14:57:35.609 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 55.7597ms
2025-12-23 14:57:35.609 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 14:57:35.610 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 64.0482ms
2025-12-23 14:57:52.295 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/v1/users - null null
2025-12-23 14:57:52.298 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api)'
2025-12-23 14:57:52.301 +02:00 [INF] Route matched with {action = "GetCurrentUserProfileData", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUserProfileDataAsync() on controller CareLink.Api.Controllers.UserController (CareLink.Api).
2025-12-23 14:57:52.316 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 14:57:52.318 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Dtos.User.UserProfileDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 14:57:52.320 +02:00 [INF] Executed action CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api) in 17.8346ms
2025-12-23 14:57:52.321 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api)'
2025-12-23 14:57:52.322 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/v1/users - 200 null application/json; charset=utf-8 26.5402ms
2025-12-23 15:00:01.631 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/device-types - application/json 14
2025-12-23 15:00:01.635 +02:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Administrator|Moderator)
2025-12-23 15:00:01.637 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2025-12-23 15:00:01.637 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/device-types - 403 0 null 6.1308ms
2025-12-23 15:01:54.872 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives - null null
2025-12-23 15:01:54.875 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 15:01:54.878 +02:00 [INF] Route matched with {action = "GetAllRelatives", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRelatives() on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:01:54.903 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 15:01:54.905 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Relatives.RelativeDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:01:54.908 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api) in 28.6201ms
2025-12-23 15:01:54.908 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 15:01:54.909 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives - 200 null application/json; charset=utf-8 36.4152ms
2025-12-23 15:02:42.121 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/relatives - application/json 44
2025-12-23 15:02:42.124 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.CreateRelativeAsync (CareLink.Api)'
2025-12-23 15:02:42.127 +02:00 [INF] Route matched with {action = "CreateRelative", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRelativeAsync(CareLink.Api.Models.Requests.CreateRelativeRequest) on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:02:42.134 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:02:42.137 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:02:42.153 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_GuardianUserId_0='?' (DbType = Int64), @__request_RelativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__request_GuardianUserId_0 AND [r].[RelativeUserId] = @__request_RelativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:02:42.170 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Relatives] ([AddedAt], [GuardianUserId], [RelationTypeId], [RelativeUserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-23 15:02:42.173 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 15:02:42.174 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.CreateRelativeAsync (CareLink.Api) in 46.5892ms
2025-12-23 15:02:42.175 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.CreateRelativeAsync (CareLink.Api)'
2025-12-23 15:02:42.176 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/relatives - 200 null application/json; charset=utf-8 54.4859ms
2025-12-23 15:02:44.662 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives - null null
2025-12-23 15:02:44.664 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 15:02:44.664 +02:00 [INF] Route matched with {action = "GetAllRelatives", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRelatives() on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:02:44.681 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 15:02:44.683 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Relatives.RelativeDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:02:44.685 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api) in 19.9747ms
2025-12-23 15:02:44.686 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 15:02:44.687 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives - 200 null application/json; charset=utf-8 25.0061ms
2025-12-23 15:03:45.477 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/iot-devices - null null
2025-12-23 15:03:45.485 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.IoTDeviceController.GetAllUsersIotDevicesAsync (CareLink.Api)'
2025-12-23 15:03:45.490 +02:00 [INF] Route matched with {action = "GetAllUsersIotDevices", controller = "IoTDevice"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsersIotDevicesAsync() on controller CareLink.Api.Controllers.IoTDeviceController (CareLink.Api).
2025-12-23 15:03:45.522 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId], [d].[Id], [d].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [IotDevices] AS [i]
INNER JOIN [DeviceTypes] AS [d] ON [i].[DeviceTypeId] = [d].[Id]
INNER JOIN [Users] AS [u] ON [i].[UserId] = [u].[Id]
2025-12-23 15:03:45.528 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.IoTDeviceDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:03:45.534 +02:00 [INF] Executed action CareLink.Api.Controllers.IoTDeviceController.GetAllUsersIotDevicesAsync (CareLink.Api) in 41.056ms
2025-12-23 15:03:45.536 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.IoTDeviceController.GetAllUsersIotDevicesAsync (CareLink.Api)'
2025-12-23 15:03:45.538 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/iot-devices - 200 null application/json; charset=utf-8 61.8101ms
2025-12-23 15:03:56.685 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 15:03:56.690 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 5.2436ms
2025-12-23 15:03:56.983 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 15:03:57.004 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 20.8768ms
2025-12-23 15:05:03.024 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 64
2025-12-23 15:05:03.029 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:05:03.032 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 15:05:03.046 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 15:05:03.058 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 20.0023ms
2025-12-23 15:05:03.061 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:05:03.065 +02:00 [ERR] Unhandled exception
System.UnauthorizedAccessException: Invalid credentials.
   at CareLink.Security.Security.AuthService.Login(UserLoginDto userLoginDto) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 58
   at CareLink.Api.Controllers.AuthController.Login(LoginRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 38
   at lambda_method357(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at CareLink.Api.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 25
2025-12-23 15:05:03.105 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 401 null application/json 81.7001ms
2025-12-23 15:05:13.844 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 70
2025-12-23 15:05:13.853 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:05:13.855 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 15:05:13.862 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 15:05:13.870 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 15:05:13.872 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 12.9752ms
2025-12-23 15:05:13.873 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:05:13.875 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 30.6333ms
2025-12-23 15:05:34.370 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/iot-devices - application/json 51
2025-12-23 15:05:34.377 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.IoTDeviceController.CreateIotDeviceAsync (CareLink.Api)'
2025-12-23 15:05:34.387 +02:00 [INF] Route matched with {action = "CreateIotDevice", controller = "IoTDevice"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateIotDeviceAsync(CareLink.Api.Models.Requests.CreateIoTDeviceRequest) on controller CareLink.Api.Controllers.IoTDeviceController (CareLink.Api).
2025-12-23 15:05:34.410 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:05:34.435 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Name]
FROM [DeviceTypes] AS [d]
WHERE [d].[Id] = @__p_0
2025-12-23 15:05:34.463 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__serial_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [IotDevices] AS [i]
        WHERE [i].[SerialNumber] = @__serial_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:05:34.502 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Boolean), @p2='?' (Size = 100), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [IotDevices] ([DeviceTypeId], [IsActive], [SerialNumber], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-23 15:05:34.514 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 15:05:34.518 +02:00 [INF] Executed action CareLink.Api.Controllers.IoTDeviceController.CreateIotDeviceAsync (CareLink.Api) in 124.571ms
2025-12-23 15:05:34.521 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.IoTDeviceController.CreateIotDeviceAsync (CareLink.Api)'
2025-12-23 15:05:34.527 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/iot-devices - 200 null application/json; charset=utf-8 156.0595ms
2025-12-23 15:05:39.792 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/iot-devices - null null
2025-12-23 15:05:39.796 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.IoTDeviceController.GetAllUsersIotDevicesAsync (CareLink.Api)'
2025-12-23 15:05:39.798 +02:00 [INF] Route matched with {action = "GetAllUsersIotDevices", controller = "IoTDevice"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsersIotDevicesAsync() on controller CareLink.Api.Controllers.IoTDeviceController (CareLink.Api).
2025-12-23 15:05:39.814 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId], [d].[Id], [d].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [IotDevices] AS [i]
INNER JOIN [DeviceTypes] AS [d] ON [i].[DeviceTypeId] = [d].[Id]
INNER JOIN [Users] AS [u] ON [i].[UserId] = [u].[Id]
2025-12-23 15:05:39.822 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.IoTDeviceDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:05:39.828 +02:00 [INF] Executed action CareLink.Api.Controllers.IoTDeviceController.GetAllUsersIotDevicesAsync (CareLink.Api) in 26.0455ms
2025-12-23 15:05:39.832 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.IoTDeviceController.GetAllUsersIotDevicesAsync (CareLink.Api)'
2025-12-23 15:05:39.835 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/iot-devices - 200 null application/json; charset=utf-8 42.8569ms
2025-12-23 15:06:13.119 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives/7/report - null null
2025-12-23 15:06:13.123 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 15:06:13.130 +02:00 [INF] Route matched with {action = "GetRelativeReport", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRelativeReport(Int64) on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:06:13.158 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:06:13.167 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:06:13.177 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:06:13.207 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CompletedAt], [c].[ExerciseId], [c].[Score], [c].[UserId], [c0].[Id], [c0].[Description], [c0].[DifficultyId], [c0].[Title], [c0].[TypeId], [c0].[UserId]
FROM [CognitiveResults] AS [c]
INNER JOIN [CognitiveExercises] AS [c0] ON [c].[ExerciseId] = [c0].[Id]
WHERE [c].[UserId] = @__userId_0
2025-12-23 15:06:13.221 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:06:13.258 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:06:13.266 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:06:13.279 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:06:13.289 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:06:13.294 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:06:13.304 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:06:13.326 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[SenderId] = @__userId_0
2025-12-23 15:06:13.343 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[ReceiverId] = @__userId_0
2025-12-23 15:06:13.355 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 15:06:14.199 +02:00 [INF] Executing FileContentResult, sending file with download name 'RelativeReport_7.pdf' ...
2025-12-23 15:06:14.210 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api) in 1074.0653ms
2025-12-23 15:06:14.212 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 15:06:14.214 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives/7/report - 200 37943 application/pdf 1094.8614ms
2025-12-23 15:08:27.234 +02:00 [INF] Application is shutting down...
2025-12-23 15:08:36.978 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 15:08:37.186 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 15:08:37.187 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 15:08:37.193 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 15:08:37.195 +02:00 [INF] Hosting environment: Development
2025-12-23 15:08:37.198 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 15:08:37.816 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 15:08:37.889 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 74.4259ms
2025-12-23 15:08:37.899 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 15:08:38.054 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 154.5294ms
2025-12-23 15:08:38.368 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 15:08:38.513 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 144.4015ms
2025-12-23 15:08:40.947 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives/7/report - null null
2025-12-23 15:08:41.048 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 15:08:41.082 +02:00 [INF] Route matched with {action = "GetRelativeReport", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRelativeReport(Int64) on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:08:42.833 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:08:42.965 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:08:43.042 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:08:43.102 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CompletedAt], [c].[ExerciseId], [c].[Score], [c].[UserId], [c0].[Id], [c0].[Description], [c0].[DifficultyId], [c0].[Title], [c0].[TypeId], [c0].[UserId]
FROM [CognitiveResults] AS [c]
INNER JOIN [CognitiveExercises] AS [c0] ON [c].[ExerciseId] = [c0].[Id]
WHERE [c].[UserId] = @__userId_0
2025-12-23 15:08:43.118 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:08:43.163 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:08:43.177 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:08:43.196 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:08:43.209 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:08:43.220 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:08:43.234 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:08:43.270 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[SenderId] = @__userId_0
2025-12-23 15:08:43.290 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[ReceiverId] = @__userId_0
2025-12-23 15:08:43.316 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 15:08:43.851 +02:00 [INF] Executing FileContentResult, sending file with download name 'RelativeReport_7.pdf' ...
2025-12-23 15:08:43.869 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api) in 2776.3824ms
2025-12-23 15:08:43.871 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 15:08:43.884 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives/7/report - 200 37943 application/pdf 2936.9046ms
2025-12-23 15:10:52.835 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives - null null
2025-12-23 15:10:52.844 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 15:10:52.851 +02:00 [INF] Route matched with {action = "GetAllRelatives", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRelatives() on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:10:52.889 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 15:10:52.899 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Relatives.RelativeDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:10:52.923 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api) in 67.573ms
2025-12-23 15:10:52.927 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 15:10:52.930 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives - 200 null application/json; charset=utf-8 94.5213ms
2025-12-23 15:11:01.146 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives - null null
2025-12-23 15:11:01.155 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 15:11:01.158 +02:00 [INF] Route matched with {action = "GetAllRelatives", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRelatives() on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:11:01.244 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 15:11:01.253 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Relatives.RelativeDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:11:01.265 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api) in 100.1222ms
2025-12-23 15:11:01.268 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 15:11:01.270 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives - 200 null application/json; charset=utf-8 124.059ms
2025-12-23 15:12:05.692 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/v1/users - null null
2025-12-23 15:12:05.700 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api)'
2025-12-23 15:12:05.706 +02:00 [INF] Route matched with {action = "GetCurrentUserProfileData", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUserProfileDataAsync() on controller CareLink.Api.Controllers.UserController (CareLink.Api).
2025-12-23 15:12:05.734 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:12:05.743 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Dtos.User.UserProfileDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 15:12:05.750 +02:00 [INF] Executed action CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api) in 41.5147ms
2025-12-23 15:12:05.753 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api)'
2025-12-23 15:12:05.755 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/v1/users - 200 null application/json; charset=utf-8 62.7194ms
2025-12-23 15:12:19.133 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/v1/users - null null
2025-12-23 15:12:19.138 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api)'
2025-12-23 15:12:19.140 +02:00 [INF] Route matched with {action = "GetCurrentUserProfileData", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUserProfileDataAsync() on controller CareLink.Api.Controllers.UserController (CareLink.Api).
2025-12-23 15:12:19.149 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:12:19.154 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Dtos.User.UserProfileDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 15:12:19.156 +02:00 [INF] Executed action CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api) in 12.6619ms
2025-12-23 15:12:19.157 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api)'
2025-12-23 15:12:19.159 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/v1/users - 200 null application/json; charset=utf-8 25.8325ms
2025-12-23 15:13:57.516 +02:00 [INF] Application is shutting down...
2025-12-23 15:13:59.503 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 15:13:59.657 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 15:13:59.662 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 15:13:59.668 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 15:13:59.670 +02:00 [INF] Hosting environment: Development
2025-12-23 15:13:59.671 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 15:14:00.013 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 15:14:00.085 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 75.189ms
2025-12-23 15:14:00.096 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 15:14:00.226 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 130.0337ms
2025-12-23 15:14:00.518 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 15:14:00.657 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 139.386ms
2025-12-23 15:14:26.082 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 70
2025-12-23 15:14:26.132 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:14:26.170 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 15:14:27.742 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 15:14:27.876 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 15:14:27.895 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 1714.8868ms
2025-12-23 15:14:27.897 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:14:27.908 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 1826.4394ms
2025-12-23 15:17:38.939 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/iot-readings - application/json 138
2025-12-23 15:17:39.001 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api)'
2025-12-23 15:17:39.012 +02:00 [INF] Route matched with {action = "CreateReading", controller = "IoTDeviceReadings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateReadingAsync(CareLink.Api.Models.Requests.CreateIoTReadingRequest) on controller CareLink.Api.Controllers.IoTDeviceReadingsController (CareLink.Api).
2025-12-23 15:17:39.096 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__Trim_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId]
FROM [IotDevices] AS [i]
WHERE LTRIM(RTRIM([i].[SerialNumber])) = @__Trim_0
2025-12-23 15:17:39.277 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [IotReadings] ([ActivityLevel], [DeviceId], [Pulse], [ReadDateTime], [Temperature])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-23 15:17:39.307 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Application.Dtos.IoTDevices.IoTReadingDto'.
2025-12-23 15:17:39.312 +02:00 [INF] Executed action CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api) in 296.6643ms
2025-12-23 15:17:39.313 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api)'
2025-12-23 15:17:39.315 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/iot-readings - 200 null application/json; charset=utf-8 376.2145ms
2025-12-23 15:17:50.794 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/iot-readings - application/json 134
2025-12-23 15:17:50.801 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api)'
2025-12-23 15:17:50.804 +02:00 [INF] Route matched with {action = "CreateReading", controller = "IoTDeviceReadings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateReadingAsync(CareLink.Api.Models.Requests.CreateIoTReadingRequest) on controller CareLink.Api.Controllers.IoTDeviceReadingsController (CareLink.Api).
2025-12-23 15:17:50.886 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__Trim_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId]
FROM [IotDevices] AS [i]
WHERE LTRIM(RTRIM([i].[SerialNumber])) = @__Trim_0
2025-12-23 15:17:50.900 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [IotReadings] ([ActivityLevel], [DeviceId], [Pulse], [ReadDateTime], [Temperature])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-23 15:17:50.906 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Application.Dtos.IoTDevices.IoTReadingDto'.
2025-12-23 15:17:50.908 +02:00 [INF] Executed action CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api) in 101.2139ms
2025-12-23 15:17:50.910 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api)'
2025-12-23 15:17:50.912 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/iot-readings - 200 null application/json; charset=utf-8 118.3191ms
2025-12-23 15:18:18.082 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/notifications - null null
2025-12-23 15:18:18.099 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 15:18:18.112 +02:00 [INF] Route matched with {action = "GetUsersNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersNotifications() on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 15:18:18.140 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 15:18:18.148 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Notiffications.NotificationDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:18:18.155 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api) in 37.6455ms
2025-12-23 15:18:18.158 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 15:18:18.160 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/notifications - 200 null application/json; charset=utf-8 78.0645ms
2025-12-23 15:18:29.013 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 15:18:29.022 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 9.0038ms
2025-12-23 15:18:29.355 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 15:18:29.386 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 30.8287ms
2025-12-23 15:18:55.481 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 70
2025-12-23 15:18:55.490 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:18:55.492 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 15:18:55.505 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 15:18:55.516 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 15:18:55.518 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 22.7158ms
2025-12-23 15:18:55.520 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:18:55.525 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 43.4613ms
2025-12-23 15:19:11.034 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/notifications - null null
2025-12-23 15:19:11.041 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 15:19:11.044 +02:00 [INF] Route matched with {action = "GetUsersNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersNotifications() on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 15:19:11.052 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 15:19:11.058 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Notiffications.NotificationDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:19:11.062 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api) in 14.7939ms
2025-12-23 15:19:11.064 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 15:19:11.068 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/notifications - 200 null application/json; charset=utf-8 34.545ms
2025-12-23 15:19:20.926 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/messages - application/json 44
2025-12-23 15:19:20.931 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.MessageController.CreateMessageAsync (CareLink.Api)'
2025-12-23 15:19:20.936 +02:00 [INF] Route matched with {action = "CreateMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateMessageAsync(CareLink.Api.Models.Requests.CreateMessageRequest) on controller CareLink.Api.Controllers.MessageController (CareLink.Api).
2025-12-23 15:19:20.967 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:19:20.975 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:19:21.021 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 600), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-23 15:19:21.057 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int64), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Content], [CreatedDate], [GroupOfIds], [IsRead], [NotificationTypeId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-12-23 15:19:21.064 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Dtos.Messages.MessageDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 15:19:21.071 +02:00 [INF] Executed action CareLink.Api.Controllers.MessageController.CreateMessageAsync (CareLink.Api) in 132.4595ms
2025-12-23 15:19:21.075 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.MessageController.CreateMessageAsync (CareLink.Api)'
2025-12-23 15:19:21.078 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/messages - 200 null application/json; charset=utf-8 151.6786ms
2025-12-23 15:19:23.721 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/notifications - null null
2025-12-23 15:19:23.733 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 15:19:23.738 +02:00 [INF] Route matched with {action = "GetUsersNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersNotifications() on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 15:19:23.752 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 15:19:23.756 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Notiffications.NotificationDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:19:23.763 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api) in 19.7427ms
2025-12-23 15:19:23.769 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 15:19:23.773 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/notifications - 200 null application/json; charset=utf-8 51.7523ms
2025-12-23 15:20:07.835 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7173/api/notifications/1 - null 0
2025-12-23 15:20:07.838 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.MarkAsRead (CareLink.Api)'
2025-12-23 15:20:07.846 +02:00 [INF] Route matched with {action = "MarkAsRead", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int64) on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 15:20:07.868 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
WHERE [n].[Id] = @__p_0
2025-12-23 15:20:07.889 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p6='?' (DbType = Int64), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int64), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [Content] = @p0, [CreatedDate] = @p1, [GroupOfIds] = @p2, [IsRead] = @p3, [NotificationTypeId] = @p4, [UserId] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-12-23 15:20:07.895 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 15:20:07.899 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.MarkAsRead (CareLink.Api) in 50.1454ms
2025-12-23 15:20:07.902 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.MarkAsRead (CareLink.Api)'
2025-12-23 15:20:07.905 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7173/api/notifications/1 - 200 null application/json; charset=utf-8 70.7619ms
2025-12-23 15:20:14.681 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/notifications - null null
2025-12-23 15:20:14.691 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 15:20:14.693 +02:00 [INF] Route matched with {action = "GetUsersNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersNotifications() on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 15:20:14.702 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 15:20:14.709 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Notiffications.NotificationDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 15:20:14.713 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api) in 14.8605ms
2025-12-23 15:20:14.716 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 15:20:14.719 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/notifications - 200 null application/json; charset=utf-8 38.0888ms
2025-12-23 15:20:56.625 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives/7/report - null null
2025-12-23 15:20:56.633 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 15:20:56.641 +02:00 [INF] Route matched with {action = "GetRelativeReport", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRelativeReport(Int64) on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:20:56.690 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:20:56.705 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:20:56.718 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:20:56.750 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CompletedAt], [c].[ExerciseId], [c].[Score], [c].[UserId], [c0].[Id], [c0].[Description], [c0].[DifficultyId], [c0].[Title], [c0].[TypeId], [c0].[UserId]
FROM [CognitiveResults] AS [c]
INNER JOIN [CognitiveExercises] AS [c0] ON [c].[ExerciseId] = [c0].[Id]
WHERE [c].[UserId] = @__userId_0
2025-12-23 15:20:56.756 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:20:56.790 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:20:56.802 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:20:56.817 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:20:56.824 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:20:56.829 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:20:56.847 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:20:56.882 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[SenderId] = @__userId_0
2025-12-23 15:20:56.904 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[ReceiverId] = @__userId_0
2025-12-23 15:20:56.937 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 15:20:57.441 +02:00 [INF] Executing FileContentResult, sending file with download name 'RelativeReport_7.pdf' ...
2025-12-23 15:20:57.450 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api) in 802.7179ms
2025-12-23 15:20:57.452 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 15:20:57.454 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives/7/report - 200 39160 application/pdf 829.1353ms
2025-12-23 15:21:23.753 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/cognitive-exercise - application/json 86
2025-12-23 15:21:23.761 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.CognitiveExerciseController.CreateCognitiveExercise (CareLink.Api)'
2025-12-23 15:21:23.767 +02:00 [INF] Route matched with {action = "CreateCognitiveExercise", controller = "CognitiveExercise"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCognitiveExercise(CareLink.Api.Models.Requests.CreateCognitiveExercise) on controller CareLink.Api.Controllers.CognitiveExerciseController (CareLink.Api).
2025-12-23 15:21:23.784 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:21:23.799 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_TypeId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CognitiveExerciseTypes] AS [c]
        WHERE [c].[Id] = @__request_TypeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:21:23.815 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__request_DifficultyId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Difficulties] AS [d]
        WHERE [d].[Id] = @__request_DifficultyId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:21:23.853 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int64), @p2='?' (Size = 200), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CognitiveExercises] ([Description], [DifficultyId], [Title], [TypeId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-23 15:21:23.859 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 15:21:23.862 +02:00 [INF] Executed action CareLink.Api.Controllers.CognitiveExerciseController.CreateCognitiveExercise (CareLink.Api) in 89.6108ms
2025-12-23 15:21:23.866 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.CognitiveExerciseController.CreateCognitiveExercise (CareLink.Api)'
2025-12-23 15:21:23.867 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/cognitive-exercise - 200 null application/json; charset=utf-8 114.1162ms
2025-12-23 15:21:37.924 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/cognitive-exercise/1/result - application/json 77
2025-12-23 15:21:37.928 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.CognitiveExerciseController.ReportCognitiveExerciseResult (CareLink.Api)'
2025-12-23 15:21:37.937 +02:00 [INF] Route matched with {action = "ReportCognitiveExerciseResult", controller = "CognitiveExercise"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReportCognitiveExerciseResult(Int64, CareLink.Api.Models.Requests.CognitiveExerciseReport) on controller CareLink.Api.Controllers.CognitiveExerciseController (CareLink.Api).
2025-12-23 15:21:37.952 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:21:37.973 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[DifficultyId], [c].[Title], [c].[TypeId], [c].[UserId]
FROM [CognitiveExercises] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-23 15:21:37.998 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CognitiveResults] ([CompletedAt], [ExerciseId], [Score], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-23 15:21:38.009 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 15:21:38.012 +02:00 [INF] Executed action CareLink.Api.Controllers.CognitiveExerciseController.ReportCognitiveExerciseResult (CareLink.Api) in 70.951ms
2025-12-23 15:21:38.014 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.CognitiveExerciseController.ReportCognitiveExerciseResult (CareLink.Api)'
2025-12-23 15:21:38.016 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/cognitive-exercise/1/result - 200 null application/json; charset=utf-8 92.631ms
2025-12-23 15:21:46.147 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives/7/report - null null
2025-12-23 15:21:46.149 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 15:21:46.151 +02:00 [INF] Route matched with {action = "GetRelativeReport", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRelativeReport(Int64) on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 15:21:46.157 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:21:46.161 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 15:21:46.165 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:21:46.177 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CompletedAt], [c].[ExerciseId], [c].[Score], [c].[UserId], [c0].[Id], [c0].[Description], [c0].[DifficultyId], [c0].[Title], [c0].[TypeId], [c0].[UserId]
FROM [CognitiveResults] AS [c]
INNER JOIN [CognitiveExercises] AS [c0] ON [c].[ExerciseId] = [c0].[Id]
WHERE [c].[UserId] = @__userId_0
2025-12-23 15:21:46.185 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:21:46.189 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:21:46.193 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:21:46.198 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:21:46.203 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:21:46.208 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 15:21:46.212 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 15:21:46.217 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[SenderId] = @__userId_0
2025-12-23 15:21:46.223 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[ReceiverId] = @__userId_0
2025-12-23 15:21:46.228 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 15:21:46.242 +02:00 [INF] Executing FileContentResult, sending file with download name 'RelativeReport_7.pdf' ...
2025-12-23 15:21:46.248 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api) in 95.0766ms
2025-12-23 15:21:46.251 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 15:21:46.253 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives/7/report - 200 39167 application/pdf 106.299ms
2025-12-23 15:56:42.689 +02:00 [INF] Application is shutting down...
2025-12-23 15:56:57.551 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 15:56:57.757 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 15:56:57.760 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 15:56:57.768 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 15:56:57.770 +02:00 [INF] Hosting environment: Development
2025-12-23 15:56:57.771 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 15:56:58.587 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 15:56:58.681 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 95.9224ms
2025-12-23 15:56:58.693 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 15:56:58.859 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 165.9059ms
2025-12-23 15:56:58.926 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/swagger-ui.css - null null
2025-12-23 15:56:58.949 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-23 15:56:58.952 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/swagger-ui.css - 499 144929 text/css 25.1283ms
2025-12-23 15:56:59.179 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 15:56:59.343 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 164.022ms
2025-12-23 15:58:15.586 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 70
2025-12-23 15:58:15.639 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:58:15.670 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 15:58:17.036 +02:00 [ERR] An error occurred using the connection to database 'CareLinkDb' on server 'DESKTOP-LCBASFT'.
2025-12-23 15:58:17.066 +02:00 [ERR] An exception occurred while iterating over the results of a query for context type 'CareLink.Persistence.DbContext.CareLinkDbContext'.
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:cd58e0ae-111c-434e-a4f1-a11d6d78c548
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:cd58e0ae-111c-434e-a4f1-a11d6d78c548
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-12-23 15:58:17.087 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 1407.0788ms
2025-12-23 15:58:17.092 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 15:58:17.097 +02:00 [ERR] Unhandled exception
System.InvalidOperationException: An exception has been raised that is likely due to a transient failure. Consider enabling transient error resiliency by adding 'EnableRetryOnFailure' to the 'UseSqlServer' call.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database "CareLinkDb" requested by the login. The login failed.
Login failed for user 'DESKTOP-LCBASFT\iolk'.
   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)
   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenInternalAsync(Boolean errorsExpected, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalConnection.OpenAsync(CancellationToken cancellationToken, Boolean errorsExpected)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
ClientConnectionId:cd58e0ae-111c-434e-a4f1-a11d6d78c548
Error Number:4060,State:1,Class:11
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at CareLink.Persistence.Repositories.UserRepository.GetByEmailAsync(String email) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Persistence\Repositories\UserRepository.cs:line 17
   at CareLink.Security.Security.AuthService.Login(UserLoginDto userLoginDto) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Security\Security\AuthService.cs:line 47
   at CareLink.Api.Controllers.AuthController.Login(LoginRequest request) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Controllers\AuthController.cs:line 38
   at lambda_method6(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at CareLink.Api.Middlewares.ExceptionHandlingMiddleware.InvokeAsync(HttpContext context) in C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api\Middlewares\ExceptionHandlingMiddleware.cs:line 25
2025-12-23 15:58:17.145 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 400 null application/json 1559.2726ms
2025-12-23 15:58:48.972 +02:00 [INF] Application is shutting down...
2025-12-23 17:40:01.470 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 17:40:01.572 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 17:40:01.573 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 17:40:01.575 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 17:40:01.575 +02:00 [INF] Hosting environment: Development
2025-12-23 17:40:01.576 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 17:40:02.081 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 17:40:02.125 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 45.0116ms
2025-12-23 17:40:02.131 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 17:40:02.211 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 79.6468ms
2025-12-23 17:40:02.352 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 17:40:02.446 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 93.5694ms
2025-12-23 17:40:16.644 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 235
2025-12-23 17:40:16.670 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 17:40:16.688 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 17:40:17.590 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 17:40:17.671 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 17:40:17.804 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 17:40:17.826 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 17:40:17.834 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 1142.5707ms
2025-12-23 17:40:17.835 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 17:40:17.840 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 1196.3273ms
2025-12-23 17:40:21.968 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 17:40:21.970 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 1.7464ms
2025-12-23 17:40:22.108 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 17:40:22.119 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 10.6141ms
2025-12-23 17:52:57.274 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 64
2025-12-23 17:52:57.279 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 17:52:57.283 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 17:52:57.380 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 17:52:57.403 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 17:52:57.407 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 122.4227ms
2025-12-23 17:52:57.408 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 17:52:57.409 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 135.5834ms
2025-12-23 17:53:09.339 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 17:53:09.342 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 2.6781ms
2025-12-23 17:53:09.520 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 17:53:09.528 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 8.6662ms
2025-12-23 17:53:10.826 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 17:53:10.833 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 6.7112ms
2025-12-23 17:53:21.944 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 238
2025-12-23 17:53:21.947 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 17:53:21.948 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 17:53:21.964 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 17:53:21.970 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 17:53:21.981 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 17:53:21.983 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 17:53:21.984 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 34.4931ms
2025-12-23 17:53:21.985 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 17:53:21.986 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 41.42ms
2025-12-23 17:53:35.329 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/register - application/json 237
2025-12-23 17:53:35.331 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 17:53:35.332 +02:00 [INF] Route matched with {action = "Register", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse]] Register(CareLink.Api.Models.Requests.RegisterRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 17:53:35.336 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 17:53:35.339 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__roleId_0
2025-12-23 17:53:35.348 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([Address], [DateCreated], [DateOdBirth], [Email], [FirstName], [LastName], [PasswordHash], [PhoneNumber], [RoleId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8);
2025-12-23 17:53:35.350 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 17:53:35.351 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Register (CareLink.Api) in 18.3118ms
2025-12-23 17:53:35.351 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Register (CareLink.Api)'
2025-12-23 17:53:35.352 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/register - 200 null application/json; charset=utf-8 22.6623ms
2025-12-23 17:53:47.113 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 70
2025-12-23 17:53:47.114 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 17:53:47.115 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 17:53:47.121 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 17:53:47.126 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 17:53:47.127 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 11.0497ms
2025-12-23 17:53:47.128 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 17:53:47.129 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 16.5418ms
2025-12-23 17:54:09.115 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/v1/auth/login - application/json 70
2025-12-23 17:54:09.116 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 17:54:09.117 +02:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[CareLink.Api.Models.Responses.ApiResponse`1[CareLink.Application.Security.LoginData]]] Login(CareLink.Api.Models.Requests.LoginRequest) on controller CareLink.Api.Controllers.AuthController (CareLink.Api).
2025-12-23 17:54:09.120 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__email_0='?' (Size = 200)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [r].[Id], [r].[Name]
FROM [Users] AS [u]
INNER JOIN [Roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[Email] = @__email_0
2025-12-23 17:54:09.124 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Security.LoginData, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 17:54:09.124 +02:00 [INF] Executed action CareLink.Api.Controllers.AuthController.Login (CareLink.Api) in 6.6512ms
2025-12-23 17:54:09.125 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AuthController.Login (CareLink.Api)'
2025-12-23 17:54:09.126 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/v1/auth/login - 200 null application/json; charset=utf-8 11.8668ms
2025-12-23 17:54:36.863 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/relatives - application/json 44
2025-12-23 17:54:36.890 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.CreateRelativeAsync (CareLink.Api)'
2025-12-23 17:54:36.894 +02:00 [INF] Route matched with {action = "CreateRelative", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRelativeAsync(CareLink.Api.Models.Requests.CreateRelativeRequest) on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 17:54:36.914 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:54:36.918 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:54:36.935 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_GuardianUserId_0='?' (DbType = Int64), @__request_RelativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__request_GuardianUserId_0 AND [r].[RelativeUserId] = @__request_RelativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:54:36.959 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Relatives] ([AddedAt], [GuardianUserId], [RelationTypeId], [RelativeUserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-23 17:54:36.963 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 17:54:36.964 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.CreateRelativeAsync (CareLink.Api) in 68.4305ms
2025-12-23 17:54:36.964 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.CreateRelativeAsync (CareLink.Api)'
2025-12-23 17:54:36.966 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/relatives - 200 null application/json; charset=utf-8 102.7388ms
2025-12-23 17:54:42.196 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives - null null
2025-12-23 17:54:42.199 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 17:54:42.202 +02:00 [INF] Route matched with {action = "GetAllRelatives", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllRelatives() on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 17:54:42.228 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 17:54:42.231 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Relatives.RelativeDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 17:54:42.235 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api) in 32.0541ms
2025-12-23 17:54:42.236 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetAllRelatives (CareLink.Api)'
2025-12-23 17:54:42.237 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives - 200 null application/json; charset=utf-8 41.0197ms
2025-12-23 17:55:11.331 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/messages/user/3 - null null
2025-12-23 17:55:11.334 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.MessageController.GetUsersMessagesAsync (CareLink.Api)'
2025-12-23 17:55:11.337 +02:00 [INF] Route matched with {action = "GetUsersMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersMessagesAsync(Int64) on controller CareLink.Api.Controllers.MessageController (CareLink.Api).
2025-12-23 17:55:11.344 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:55:11.351 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
FROM [Messages] AS [m]
2025-12-23 17:55:11.353 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Messages.MessageDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 17:55:11.356 +02:00 [INF] Executed action CareLink.Api.Controllers.MessageController.GetUsersMessagesAsync (CareLink.Api) in 17.2211ms
2025-12-23 17:55:11.357 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.MessageController.GetUsersMessagesAsync (CareLink.Api)'
2025-12-23 17:55:11.357 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/messages/user/3 - 200 null application/json; charset=utf-8 26.3436ms
2025-12-23 17:55:20.867 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/notifications - null null
2025-12-23 17:55:20.869 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 17:55:20.872 +02:00 [INF] Route matched with {action = "GetUsersNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersNotifications() on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 17:55:20.883 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 17:55:20.886 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Notiffications.NotificationDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 17:55:20.890 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api) in 16.467ms
2025-12-23 17:55:20.891 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 17:55:20.892 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/notifications - 200 null application/json; charset=utf-8 25.5583ms
2025-12-23 17:55:30.159 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/messages - application/json 44
2025-12-23 17:55:30.161 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.MessageController.CreateMessageAsync (CareLink.Api)'
2025-12-23 17:55:30.165 +02:00 [INF] Route matched with {action = "CreateMessage", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateMessageAsync(CareLink.Api.Models.Requests.CreateMessageRequest) on controller CareLink.Api.Controllers.MessageController (CareLink.Api).
2025-12-23 17:55:30.171 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:55:30.175 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:55:30.191 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 600), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Messages] ([Content], [ReceiverId], [SenderId], [SentAt])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-23 17:55:30.213 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int64), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Notifications] ([Content], [CreatedDate], [GroupOfIds], [IsRead], [NotificationTypeId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5);
2025-12-23 17:55:30.216 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Dtos.Messages.MessageDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 17:55:30.217 +02:00 [INF] Executed action CareLink.Api.Controllers.MessageController.CreateMessageAsync (CareLink.Api) in 51.4805ms
2025-12-23 17:55:30.218 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.MessageController.CreateMessageAsync (CareLink.Api)'
2025-12-23 17:55:30.219 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/messages - 200 null application/json; charset=utf-8 59.3175ms
2025-12-23 17:55:33.017 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/notifications - null null
2025-12-23 17:55:33.019 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 17:55:33.020 +02:00 [INF] Route matched with {action = "GetUsersNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersNotifications() on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 17:55:33.023 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 17:55:33.024 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Notiffications.NotificationDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 17:55:33.027 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api) in 5.8701ms
2025-12-23 17:55:33.027 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 17:55:33.028 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/notifications - 200 null application/json; charset=utf-8 10.9211ms
2025-12-23 17:55:40.168 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/messages/user/3 - null null
2025-12-23 17:55:40.170 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.MessageController.GetUsersMessagesAsync (CareLink.Api)'
2025-12-23 17:55:40.171 +02:00 [INF] Route matched with {action = "GetUsersMessages", controller = "Message"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersMessagesAsync(Int64) on controller CareLink.Api.Controllers.MessageController (CareLink.Api).
2025-12-23 17:55:40.180 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:55:40.184 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt]
FROM [Messages] AS [m]
2025-12-23 17:55:40.186 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Messages.MessageDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 17:55:40.188 +02:00 [INF] Executed action CareLink.Api.Controllers.MessageController.GetUsersMessagesAsync (CareLink.Api) in 16.2135ms
2025-12-23 17:55:40.190 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.MessageController.GetUsersMessagesAsync (CareLink.Api)'
2025-12-23 17:55:40.191 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/messages/user/3 - 200 null application/json; charset=utf-8 22.8204ms
2025-12-23 17:55:51.297 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7173/api/notifications/1 - null 0
2025-12-23 17:55:51.299 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.MarkAsRead (CareLink.Api)'
2025-12-23 17:55:51.302 +02:00 [INF] Route matched with {action = "MarkAsRead", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] MarkAsRead(Int64) on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 17:55:51.313 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
WHERE [n].[Id] = @__p_0
2025-12-23 17:55:51.322 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p6='?' (DbType = Int64), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (Size = 4000), @p3='?' (DbType = Boolean), @p4='?' (DbType = Int64), @p5='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Notifications] SET [Content] = @p0, [CreatedDate] = @p1, [GroupOfIds] = @p2, [IsRead] = @p3, [NotificationTypeId] = @p4, [UserId] = @p5
OUTPUT 1
WHERE [Id] = @p6;
2025-12-23 17:55:51.324 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 17:55:51.325 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.MarkAsRead (CareLink.Api) in 22.3818ms
2025-12-23 17:55:51.326 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.MarkAsRead (CareLink.Api)'
2025-12-23 17:55:51.327 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7173/api/notifications/1 - 200 null application/json; charset=utf-8 29.8107ms
2025-12-23 17:55:53.751 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/notifications - null null
2025-12-23 17:55:53.753 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 17:55:53.753 +02:00 [INF] Route matched with {action = "GetUsersNotifications", controller = "Notification"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsersNotifications() on controller CareLink.Api.Controllers.NotificationController (CareLink.Api).
2025-12-23 17:55:53.756 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 17:55:53.757 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Notiffications.NotificationDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 17:55:53.758 +02:00 [INF] Executed action CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api) in 3.8107ms
2025-12-23 17:55:53.759 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.NotificationController.GetUsersNotifications (CareLink.Api)'
2025-12-23 17:55:53.760 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/notifications - 200 null application/json; charset=utf-8 8.3738ms
2025-12-23 17:56:14.330 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/iot-devices - application/json 51
2025-12-23 17:56:14.332 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.IoTDeviceController.CreateIotDeviceAsync (CareLink.Api)'
2025-12-23 17:56:14.335 +02:00 [INF] Route matched with {action = "CreateIotDevice", controller = "IoTDevice"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateIotDeviceAsync(CareLink.Api.Models.Requests.CreateIoTDeviceRequest) on controller CareLink.Api.Controllers.IoTDeviceController (CareLink.Api).
2025-12-23 17:56:14.342 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:56:14.351 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [d].[Id], [d].[Name]
FROM [DeviceTypes] AS [d]
WHERE [d].[Id] = @__p_0
2025-12-23 17:56:14.364 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__serial_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [IotDevices] AS [i]
        WHERE [i].[SerialNumber] = @__serial_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:56:14.380 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Boolean), @p2='?' (Size = 100), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [IotDevices] ([DeviceTypeId], [IsActive], [SerialNumber], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-23 17:56:14.383 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 17:56:14.384 +02:00 [INF] Executed action CareLink.Api.Controllers.IoTDeviceController.CreateIotDeviceAsync (CareLink.Api) in 48.0898ms
2025-12-23 17:56:14.385 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.IoTDeviceController.CreateIotDeviceAsync (CareLink.Api)'
2025-12-23 17:56:14.385 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/iot-devices - 200 null application/json; charset=utf-8 55.4634ms
2025-12-23 17:56:44.614 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives/3/report - null null
2025-12-23 17:56:44.617 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 17:56:44.620 +02:00 [INF] Route matched with {action = "GetRelativeReport", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRelativeReport(Int64) on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 17:56:44.638 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:56:44.642 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:56:44.647 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:56:44.662 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CompletedAt], [c].[ExerciseId], [c].[Score], [c].[UserId], [c0].[Id], [c0].[Description], [c0].[DifficultyId], [c0].[Title], [c0].[TypeId], [c0].[UserId]
FROM [CognitiveResults] AS [c]
INNER JOIN [CognitiveExercises] AS [c0] ON [c].[ExerciseId] = [c0].[Id]
WHERE [c].[UserId] = @__userId_0
2025-12-23 17:56:44.666 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:56:44.686 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 17:56:44.689 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:56:44.697 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 17:56:44.701 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:56:44.703 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 17:56:44.707 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:56:44.720 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[SenderId] = @__userId_0
2025-12-23 17:56:44.730 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[ReceiverId] = @__userId_0
2025-12-23 17:56:44.735 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 17:56:45.061 +02:00 [INF] Executing FileContentResult, sending file with download name 'RelativeReport_3.pdf' ...
2025-12-23 17:56:45.067 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api) in 445.9204ms
2025-12-23 17:56:45.068 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 17:56:45.068 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives/3/report - 200 38146 application/pdf 453.9449ms
2025-12-23 17:57:21.491 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/cognitive-exercise - application/json 86
2025-12-23 17:57:21.494 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.CognitiveExerciseController.CreateCognitiveExercise (CareLink.Api)'
2025-12-23 17:57:21.496 +02:00 [INF] Route matched with {action = "CreateCognitiveExercise", controller = "CognitiveExercise"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateCognitiveExercise(CareLink.Api.Models.Requests.CreateCognitiveExercise) on controller CareLink.Api.Controllers.CognitiveExerciseController (CareLink.Api).
2025-12-23 17:57:21.505 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:57:21.515 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__request_TypeId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [CognitiveExerciseTypes] AS [c]
        WHERE [c].[Id] = @__request_TypeId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:57:21.521 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__request_DifficultyId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Difficulties] AS [d]
        WHERE [d].[Id] = @__request_DifficultyId_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:57:21.540 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000), @p1='?' (DbType = Int64), @p2='?' (Size = 200), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CognitiveExercises] ([Description], [DifficultyId], [Title], [TypeId], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-23 17:57:21.544 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 17:57:21.545 +02:00 [INF] Executed action CareLink.Api.Controllers.CognitiveExerciseController.CreateCognitiveExercise (CareLink.Api) in 47.3782ms
2025-12-23 17:57:21.546 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.CognitiveExerciseController.CreateCognitiveExercise (CareLink.Api)'
2025-12-23 17:57:21.547 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/cognitive-exercise - 200 null application/json; charset=utf-8 55.6515ms
2025-12-23 17:57:38.043 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/cognitive-exercise/1/result - application/json 77
2025-12-23 17:57:38.045 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.CognitiveExerciseController.ReportCognitiveExerciseResult (CareLink.Api)'
2025-12-23 17:57:38.049 +02:00 [INF] Route matched with {action = "ReportCognitiveExerciseResult", controller = "CognitiveExercise"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ReportCognitiveExerciseResult(Int64, CareLink.Api.Models.Requests.CognitiveExerciseReport) on controller CareLink.Api.Controllers.CognitiveExerciseController (CareLink.Api).
2025-12-23 17:57:38.055 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:57:38.065 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [c].[Id], [c].[Description], [c].[DifficultyId], [c].[Title], [c].[TypeId], [c].[UserId]
FROM [CognitiveExercises] AS [c]
WHERE [c].[Id] = @__p_0
2025-12-23 17:57:38.078 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [CognitiveResults] ([CompletedAt], [ExerciseId], [Score], [UserId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3);
2025-12-23 17:57:38.080 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse'.
2025-12-23 17:57:38.081 +02:00 [INF] Executed action CareLink.Api.Controllers.CognitiveExerciseController.ReportCognitiveExerciseResult (CareLink.Api) in 30.7586ms
2025-12-23 17:57:38.081 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.CognitiveExerciseController.ReportCognitiveExerciseResult (CareLink.Api)'
2025-12-23 17:57:38.082 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/cognitive-exercise/1/result - 200 null application/json; charset=utf-8 38.7231ms
2025-12-23 17:58:07.821 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/iot-readings - application/json 135
2025-12-23 17:58:07.823 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api)'
2025-12-23 17:58:07.826 +02:00 [INF] Route matched with {action = "CreateReading", controller = "IoTDeviceReadings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateReadingAsync(CareLink.Api.Models.Requests.CreateIoTReadingRequest) on controller CareLink.Api.Controllers.IoTDeviceReadingsController (CareLink.Api).
2025-12-23 17:58:07.850 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__Trim_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId]
FROM [IotDevices] AS [i]
WHERE LTRIM(RTRIM([i].[SerialNumber])) = @__Trim_0
2025-12-23 17:58:07.867 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [IotReadings] ([ActivityLevel], [DeviceId], [Pulse], [ReadDateTime], [Temperature])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-23 17:58:07.870 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Application.Dtos.IoTDevices.IoTReadingDto'.
2025-12-23 17:58:07.872 +02:00 [INF] Executed action CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api) in 44.6774ms
2025-12-23 17:58:07.873 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api)'
2025-12-23 17:58:07.874 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/iot-readings - 200 null application/json; charset=utf-8 52.642ms
2025-12-23 17:58:17.751 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7173/api/iot-readings - application/json 133
2025-12-23 17:58:17.753 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api)'
2025-12-23 17:58:17.754 +02:00 [INF] Route matched with {action = "CreateReading", controller = "IoTDeviceReadings"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateReadingAsync(CareLink.Api.Models.Requests.CreateIoTReadingRequest) on controller CareLink.Api.Controllers.IoTDeviceReadingsController (CareLink.Api).
2025-12-23 17:58:17.757 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__Trim_0='?' (Size = 100)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId]
FROM [IotDevices] AS [i]
WHERE LTRIM(RTRIM([i].[SerialNumber])) = @__Trim_0
2025-12-23 17:58:17.761 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = DateTime2), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [IotReadings] ([ActivityLevel], [DeviceId], [Pulse], [ReadDateTime], [Temperature])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2025-12-23 17:58:17.763 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Application.Dtos.IoTDevices.IoTReadingDto'.
2025-12-23 17:58:17.764 +02:00 [INF] Executed action CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api) in 9.2361ms
2025-12-23 17:58:17.764 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.IoTDeviceReadingsController.CreateReadingAsync (CareLink.Api)'
2025-12-23 17:58:17.765 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7173/api/iot-readings - 200 null application/json; charset=utf-8 13.6815ms
2025-12-23 17:58:29.708 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/relatives/3/report - null null
2025-12-23 17:58:29.710 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 17:58:29.711 +02:00 [INF] Route matched with {action = "GetRelativeReport", controller = "Relative"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRelativeReport(Int64) on controller CareLink.Api.Controllers.RelativeController (CareLink.Api).
2025-12-23 17:58:29.715 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:58:29.719 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:58:29.721 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:58:29.728 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [c].[Id], [c].[CompletedAt], [c].[ExerciseId], [c].[Score], [c].[UserId], [c0].[Id], [c0].[Description], [c0].[DifficultyId], [c0].[Title], [c0].[TypeId], [c0].[UserId]
FROM [CognitiveResults] AS [c]
INNER JOIN [CognitiveExercises] AS [c0] ON [c].[ExerciseId] = [c0].[Id]
WHERE [c].[UserId] = @__userId_0
2025-12-23 17:58:29.732 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:58:29.737 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_1) [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 17:58:29.741 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:58:29.746 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 17:58:29.748 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:58:29.750 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [i0].[Id], [i0].[ActivityLevel], [i0].[DeviceId], [i0].[Pulse], [i0].[ReadDateTime], [i0].[Temperature]
FROM [IotDevices] AS [i]
INNER JOIN [IotReadings] AS [i0] ON [i].[Id] = [i0].[DeviceId]
WHERE [i].[UserId] = @__userId_0
ORDER BY [i0].[ReadDateTime] DESC
2025-12-23 17:58:29.755 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__guardianUserId_0='?' (DbType = Int64), @__relativeUserId_1='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Relatives] AS [r]
        WHERE [r].[GuardianUserId] = @__guardianUserId_0 AND [r].[RelativeUserId] = @__relativeUserId_1) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-12-23 17:58:29.760 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[SenderId] = @__userId_0
2025-12-23 17:58:29.765 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Messages] AS [m]
INNER JOIN [Users] AS [u] ON [m].[SenderId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [m].[ReceiverId] = [u0].[Id]
WHERE [m].[ReceiverId] = @__userId_0
2025-12-23 17:58:29.770 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[Name], [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId], [u0].[Id], [u0].[Address], [u0].[DateCreated], [u0].[DateOdBirth], [u0].[Email], [u0].[FirstName], [u0].[LastName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[RoleId]
FROM [Relatives] AS [r]
INNER JOIN [RelationTypes] AS [r0] ON [r].[RelationTypeId] = [r0].[Id]
INNER JOIN [Users] AS [u] ON [r].[GuardianUserId] = [u].[Id]
INNER JOIN [Users] AS [u0] ON [r].[RelativeUserId] = [u0].[Id]
2025-12-23 17:58:29.785 +02:00 [INF] Executing FileContentResult, sending file with download name 'RelativeReport_3.pdf' ...
2025-12-23 17:58:29.786 +02:00 [INF] Executed action CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api) in 74.4108ms
2025-12-23 17:58:29.787 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.RelativeController.GetRelativeReport (CareLink.Api)'
2025-12-23 17:58:29.788 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/relatives/3/report - 200 39060 application/pdf 80.4384ms
2025-12-23 17:58:46.975 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/admin/system-state - null null
2025-12-23 17:58:46.978 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.GetSystemState (CareLink.Api)'
2025-12-23 17:58:46.981 +02:00 [INF] Route matched with {action = "GetSystemState", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetSystemState() on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 17:58:46.997 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
2025-12-23 17:58:47.002 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId]
FROM [IotDevices] AS [i]
2025-12-23 17:58:47.007 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ExpiresAt], [s].[StartedAt], [s].[StripeSubscriptionId], [s].[SubscriptionStatusId], [s].[SubscriptionTypeId], [s].[UserId]
FROM [Subscriptions] AS [s]
2025-12-23 17:58:47.010 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId]
FROM [Notifications] AS [n]
2025-12-23 17:58:47.012 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Application.Dtos.Admin.SystemStateDto'.
2025-12-23 17:58:47.014 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.GetSystemState (CareLink.Api) in 32.2017ms
2025-12-23 17:58:47.015 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.GetSystemState (CareLink.Api)'
2025-12-23 17:58:47.016 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/admin/system-state - 200 null application/json; charset=utf-8 40.2127ms
2025-12-23 17:59:17.400 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7173/api/admin/users/2/role/2 - null 0
2025-12-23 17:59:17.402 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.ChangeUserRole (CareLink.Api)'
2025-12-23 17:59:17.405 +02:00 [INF] Route matched with {action = "ChangeUserRole", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangeUserRole(Int64, Int64) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 17:59:17.411 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:59:17.416 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2025-12-23 17:59:17.423 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p9='?' (DbType = Int64), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2), @p2='?' (DbType = DateTime2), @p3='?' (Size = 200), @p4='?' (Size = 100), @p5='?' (Size = 100), @p6='?' (Size = 4000), @p7='?' (Size = 50), @p8='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Address] = @p0, [DateCreated] = @p1, [DateOdBirth] = @p2, [Email] = @p3, [FirstName] = @p4, [LastName] = @p5, [PasswordHash] = @p6, [PhoneNumber] = @p7, [RoleId] = @p8
OUTPUT 1
WHERE [Id] = @p9;
2025-12-23 17:59:17.427 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-23 17:59:17.428 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.ChangeUserRole (CareLink.Api) in 22.4614ms
2025-12-23 17:59:17.429 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.ChangeUserRole (CareLink.Api)'
2025-12-23 17:59:17.429 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7173/api/admin/users/2/role/2 - 204 null null 29.1228ms
2025-12-23 17:59:26.773 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/v1/users - null null
2025-12-23 17:59:26.776 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api)'
2025-12-23 17:59:26.779 +02:00 [INF] Route matched with {action = "GetCurrentUserProfileData", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentUserProfileDataAsync() on controller CareLink.Api.Controllers.UserController (CareLink.Api).
2025-12-23 17:59:26.783 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:59:26.785 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[CareLink.Application.Dtos.User.UserProfileDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-12-23 17:59:26.788 +02:00 [INF] Executed action CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api) in 7.859ms
2025-12-23 17:59:26.788 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.UserController.GetCurrentUserProfileDataAsync (CareLink.Api)'
2025-12-23 17:59:26.789 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/v1/users - 200 null application/json; charset=utf-8 15.7246ms
2025-12-23 17:59:39.729 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7173/api/admin/users/3 - null null
2025-12-23 17:59:39.731 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.DeleteUser (CareLink.Api)'
2025-12-23 17:59:39.733 +02:00 [INF] Route matched with {action = "DeleteUser", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteUser(Int64) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 17:59:39.740 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
FROM [Users] AS [u]
WHERE [u].[Id] = @__p_0
2025-12-23 17:59:39.779 +02:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-12-23 17:59:39.793 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[DateCreated], [t].[DateOdBirth], [t].[Email], [t].[FirstName], [t].[LastName], [t].[PasswordHash], [t].[PhoneNumber], [t].[RoleId], [m].[Id], [m].[Content], [m].[ReceiverId], [m].[SenderId], [m].[SentAt], [m0].[Id], [m0].[Content], [m0].[ReceiverId], [m0].[SenderId], [m0].[SentAt], [i].[Id], [i].[DeviceTypeId], [i].[IsActive], [i].[SerialNumber], [i].[UserId], [n].[Id], [n].[Content], [n].[CreatedDate], [n].[GroupOfIds], [n].[IsRead], [n].[NotificationTypeId], [n].[UserId], [r].[Id], [r].[AddedAt], [r].[GuardianUserId], [r].[RelationTypeId], [r].[RelativeUserId], [r0].[Id], [r0].[AddedAt], [r0].[GuardianUserId], [r0].[RelationTypeId], [r0].[RelativeUserId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[Address], [u].[DateCreated], [u].[DateOdBirth], [u].[Email], [u].[FirstName], [u].[LastName], [u].[PasswordHash], [u].[PhoneNumber], [u].[RoleId]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__userId_0
) AS [t]
LEFT JOIN [Messages] AS [m] ON [t].[Id] = [m].[SenderId]
LEFT JOIN [Messages] AS [m0] ON [t].[Id] = [m0].[ReceiverId]
LEFT JOIN [IotDevices] AS [i] ON [t].[Id] = [i].[UserId]
LEFT JOIN [Notifications] AS [n] ON [t].[Id] = [n].[UserId]
LEFT JOIN [Relatives] AS [r] ON [t].[Id] = [r].[RelativeUserId]
LEFT JOIN [Relatives] AS [r0] ON [t].[Id] = [r0].[GuardianUserId]
ORDER BY [t].[Id], [m].[Id], [m0].[Id], [i].[Id], [n].[Id], [r].[Id]
2025-12-23 17:59:39.810 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT [s].[Id], [s].[ExpiresAt], [s].[StartedAt], [s].[StripeSubscriptionId], [s].[SubscriptionStatusId], [s].[SubscriptionTypeId], [s].[UserId]
FROM [Subscriptions] AS [s]
WHERE [s].[UserId] = @__userId_0
2025-12-23 17:59:39.844 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int64), @p1='?' (DbType = Int64), @p2='?' (DbType = Int64), @p3='?' (DbType = Int64), @p4='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [IotDevices]
OUTPUT 1
WHERE [Id] = @p0;
DELETE FROM [Messages]
OUTPUT 1
WHERE [Id] = @p1;
DELETE FROM [Notifications]
OUTPUT 1
WHERE [Id] = @p2;
DELETE FROM [Relatives]
OUTPUT 1
WHERE [Id] = @p3;
DELETE FROM [Users]
OUTPUT 1
WHERE [Id] = @p4;
2025-12-23 17:59:39.854 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2025-12-23 17:59:39.855 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.DeleteUser (CareLink.Api) in 120.334ms
2025-12-23 17:59:39.856 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.DeleteUser (CareLink.Api)'
2025-12-23 17:59:39.857 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7173/api/admin/users/3 - 204 null null 128.1191ms
2025-12-23 18:00:18.074 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - null null
2025-12-23 18:00:18.076 +02:00 [INF] Executing endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 18:00:18.079 +02:00 [INF] Route matched with {action = "GetLogs", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetLogs(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.String) on controller CareLink.Api.Controllers.AdminController (CareLink.Api).
2025-12-23 18:00:18.114 +02:00 [INF] Executing OkObjectResult, writing value of type 'CareLink.Api.Models.Responses.ApiResponse`1[[System.Collections.Generic.IEnumerable`1[[CareLink.Application.Dtos.Admin.SystemLogDto, CareLink.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-12-23 18:00:18.121 +02:00 [INF] Executed action CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api) in 40.5873ms
2025-12-23 18:00:18.121 +02:00 [INF] Executed endpoint 'CareLink.Api.Controllers.AdminController.GetLogs (CareLink.Api)'
2025-12-23 18:00:18.122 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/api/admin/logs?from=2025-12-23%2014%3A00%3A00&to=2025-12-23%2014%3A04%3A00&level=INF - 200 null application/json; charset=utf-8 48.0064ms
2025-12-23 18:07:23.819 +02:00 [INF] Application is shutting down...
2025-12-23 19:02:02.475 +02:00 [INF] User profile is available. Using 'C:\Users\iolk\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-12-23 19:02:02.635 +02:00 [INF] Now listening on: https://localhost:7173
2025-12-23 19:02:02.732 +02:00 [INF] Now listening on: http://localhost:5266
2025-12-23 19:02:02.793 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2025-12-23 19:02:02.794 +02:00 [INF] Hosting environment: Development
2025-12-23 19:02:02.795 +02:00 [INF] Content root path: C:\Users\iolk\Desktop\ark-pzpi-23-4-borshch-anatolii\Lab2\ark-pzpi-23-4-borshch-anatolii-lab2\CareLink\CareLink.Api
2025-12-23 19:02:03.041 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger - null null
2025-12-23 19:02:03.099 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger - 301 0 null 59.0393ms
2025-12-23 19:02:03.109 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/index.html - null null
2025-12-23 19:02:03.214 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/index.html - 200 null text/html;charset=utf-8 105.4387ms
2025-12-23 19:02:03.266 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/swagger-ui.css - null null
2025-12-23 19:02:03.279 +02:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-12-23 19:02:03.280 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/swagger-ui.css - 499 144929 text/css 14.4739ms
2025-12-23 19:02:03.334 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/favicon-16x16.png - null null
2025-12-23 19:02:03.336 +02:00 [INF] Sending file. Request path: '/favicon-16x16.png'. Physical path: 'N/A'
2025-12-23 19:02:03.337 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/favicon-16x16.png - 499 665 image/png 2.9752ms
2025-12-23 19:02:03.404 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - null null
2025-12-23 19:02:03.485 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7173/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 80.9201ms
2025-12-23 19:36:55.056 +02:00 [INF] Application is shutting down...
